<!DOCTYPE html>

<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <title>Cinematics Analytics Dashboard</title>
        <!-- Consolidar Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="css/styles.css" rel="stylesheet"/>
        <link href="css/roi.css" rel="stylesheet"/>
        <!-- Otros estilos -->
        <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
        <link href="./arq/bootstrap-progressbar/css/bootstrap-progressbar-3.3.4.min.css" rel="stylesheet">
        <link href="./arq/font-awesome/css/font-awesome.min.css" rel="stylesheet">
        <!-- Font Awesome -->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>

    <!-- Consolidar Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    
    <!-- ECharts -->
    <script src="./arq/echarts/dist/echarts.min.js"></script>
    <script src="./arq/echarts/map/js/world.js"></script>
    <script src="./js/map.js"></script>

    <style>
        .card-header {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #0d6efd;
        }
        .chart-container {
            position: relative;
            height: 200px;
            width: 100%;
        }
        #heatmap-container {
            height: 450px;
        }
        .filter-section {
            background-color: #f8f9fa;
            padding: 8px;
            border-radius: 4px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body class="sb-nav-fixed">
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
        <!-- Navbar Brand with Logo -->
        <a class="navbar-brand ps-3" href="index.html">
            <img src="./images/up.png" alt="Logo" height="40" class="d-inline-block align-text-top">
        </a>
        <!-- Sidebar Toggle-->
        <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><i class="fas fa-bars"></i></button>
    </nav>
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <div class="sb-sidenav-menu-heading">Facultad de Ingeniería</div>
                        <div class="sb-sidenav-menu-heading">Bases de Datos Avanzadas</div>
                        <div class="sb-sidenav-menu-heading">Tecnología usada</div>
                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseDatos" aria-expanded="false" aria-controls="collapseDatos">
                            <div class="sb-nav-link-icon"><i class="fas fa-database"></i></div>
                            Datos
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>
                        <div class="collapse" id="collapseDatos" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav">
                                <a class="nav-link" href="https://www.kaggle.com/datasets/michaelmatta0/movies-ultimate-metrics-features-and-metadata">Movies Metrics, Features and Statistics Kaggle Dataset</a>
                            </nav>
                        </div>
                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapsePages" aria-expanded="false" aria-controls="collapsePages">
                            <div class="sb-nav-link-icon"><i class="fas fa-server"></i></div>
                            Backend Node.js
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>
                        <div class="collapse" id="collapsePages" aria-labelledby="headingTwo" data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavAccordionPages">
                                <a class="nav-link" href="#">Node.js</a>
                                <a class="nav-link" href="#">Express.js</a>
                                <a class="nav-link" href="#">Sequelize - ORM</a>
                            </nav>
                        </div>
                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapsePlantilla" aria-expanded="false" aria-controls="collapsePlantilla">
                            <div class="sb-nav-link-icon"><i class="fas fa-file-code"></i></div>
                            Plantilla
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>
                        <div class="collapse" id="collapsePlantilla" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav">
                                <a class="nav-link" href="https://startbootstrap.com/templates/admin-dashboard?showPro=false&showVue=false&showAngular=false">Startbootstrap SB Admin Template</a>
                            </nav>
                        </div>
                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseArq" aria-expanded="false" aria-controls="collapseArq">
                            <div class="sb-nav-link-icon"><i class="fas fa-layer-group"></i></div>
                            Arquitectura
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>
                        <div class="collapse" id="collapseArq" aria-labelledby="headingTwo" data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavAccordionPages">
                                <a class="nav-link" href="#">Bootstrap</a>
                                <a class="nav-link" href="#">Fontawesome</a>
                                <a class="nav-link" href="#">JQuery</a>
                            </nav>
                        </div>
                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseGraph" aria-expanded="false" aria-controls="collapseGraph">
                            <div class="sb-nav-link-icon"><i class="fas fa-chart-pie"></i></div>
                            Graficadores
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>
                        <div class="collapse" id="collapseGraph" aria-labelledby="headingTwo" data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavAccordionPages">
                                <a class="nav-link" href="#">Chart.js</a>
                                <a class="nav-link" href="#">Echarts</a>
                                <a class="nav-link" href="#">Gauge.js</a>
                            </nav>
                        </div>
                        <div class="sb-sidenav-menu-heading">Hecho por:</div>
                        <a class="nav-link">
                            <div class="sb-nav-link-icon"><i class="fas fa-user"></i></div>
                            Gael Guzmán Munguía
                        </a>
                        <a class="nav-link">
                            <div class="sb-nav-link-icon"><i class="fas fa-user"></i></div>
                            Emilio Rendón Trias
                        </a>
                        <a class="nav-link">
                            <div class="sb-nav-link-icon"><i class="fas fa-user"></i></div>
                            Víctor Gabriel Torres Guerrero
                        </a>
                    </div>
                </div>
            </nav>
        </div>
        <div id="layoutSidenav_content">
            <main>
                <div class="container-fluid px-4">
                    <div class="d-sm-flex align-items-center justify-content-between mb-4">
                        <h1 class="mt-4 mb-0 text-primary">Cinematics Analytics Dashboard</h1>
                        <div class="d-none d-sm-inline-block">
                            <ol class="breadcrumb mb-0 float-sm-right">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active">Movie Analytics</li>
                            </ol>
                        </div>
                    </div>
                    <p class="lead text-muted mb-4">Análisis comercial y estadístico de la industria cinematográfica global</p>
                    
                    <!-- Filtros Globales -->
                    <div class="row mb-4">
                        <div class="col-xl-12">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <span><i class="fas fa-filter me-1"></i> Filtros Globales</span>
                                    <button class="btn btn-sm btn-outline-primary" id="resetFilters">Restablecer Filtros</button>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-3 mb-2">
                                            <label for="yearRangeFilter" class="form-label">Rango de Años:</label>
                                            <select id="yearRangeFilter" class="form-select">
                                                <option value="all">Todo el período</option>
                                                <option value="2010-2023">2010-2023</option>
                                                <option value="2000-2009">2000-2009</option>
                                                <option value="1990-1999">1990-1999</option>
                                                <option value="1980-1989">1980-1989</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3 mb-2">
                                            <label for="genreFilter" class="form-label">Género:</label>
                                            <select id="genreFilter" class="form-select">
                                                <option value="all">Todos los géneros</option>
                                                <option value="action">Acción</option>
                                                <option value="comedy">Comedia</option>
                                                <option value="drama">Drama</option>
                                                <option value="sci-fi">Ciencia Ficción</option>
                                                <option value="horror">Terror</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3 mb-2">
                                            <label for="budgetFilter" class="form-label">Presupuesto Mínimo:</label>
                                            <select id="budgetFilter" class="form-select">
                                                <option value="all">Sin mínimo</option>
                                                <option value="1000000">1M+ USD</option>
                                                <option value="10000000">10M+ USD</option>
                                                <option value="50000000">50M+ USD</option>
                                                <option value="100000000">100M+ USD</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3 mb-2">
                                            <label for="regionFilter" class="form-label">Región:</label>
                                            <select id="regionFilter" class="form-select">
                                                <option value="all">Global</option>
                                                <option value="na">Norteamérica</option>
                                                <option value="eu">Europa</option>
                                                <option value="asia">Asia</option>
                                                <option value="other">Otras regiones</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xl-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-chart-bar me-1"></i>
                                    Top 10 Películas por Ingresos Globales
                                </div>
                                <div class="card-body">
                                    <div class="mb-2">
                                        <select id="revenuePeriodFilter" class="form-select form-select-sm w-auto">
                                            <option value="all-time">Todo el tiempo</option>
                                            <option value="decade-2010s">Década 2010s</option>
                                            <option value="decade-2000s">Década 2000s</option>
                                            <option value="decade-1990s">Década 1990s</option>
                                        </select>
                                    </div>
                                    <div class="chart-container">
                                        <canvas id="chartBestPerformance"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-tags me-1"></i>
                                    Palabras Clave Más Frecuentes en Películas Exitosas
                                </div>
                                <div class="card-body">
                                    <div class="mb-2">
                                        <select id="keywordsPeriodFilter" class="form-select form-select-sm w-auto">
                                            <option value="all">Todas las décadas</option>
                                            <option value="2010s">2010s</option>
                                            <option value="2000s">2000s</option>
                                            <option value="1990s">1990s</option>
                                        </select>
                                    </div>
                                    <div class="chart-container">
                                        <canvas id="chartPopularKeywords"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xl-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-compact-disc me-1"></i>
                                    Ventas Comparativas de DVD y BluRay
                                </div>
                                <div class="card-body">
                                    <div class="mb-2">
                                        <select id="physicalMediaYearFilter" class="form-select form-select-sm w-auto">
                                            <option value="all">Todos los años</option>
                                            <option value="2020-2023">2020-2023</option>
                                            <option value="2015-2019">2015-2019</option>
                                            <option value="2010-2014">2010-2014</option>
                                            <option value="2005-2009">2005-2009</option>
                                        </select>
                                    </div>
                                    <div class="chart-container">
                                        <canvas id="chartPhysicalPerformance"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-chart-line me-1"></i>
                                    Evolución de la Rentabilidad Anual del Cine
                                </div>
                                <div class="card-body">
                                    <div class="mb-2 d-flex gap-2">
                                        <select id="profitMetricFilter" class="form-select form-select-sm w-auto">
                                            <option value="total">Ganancia Total</option>
                                            <option value="average">Ganancia Promedio</option>
                                            <option value="median">Ganancia Mediana</option>
                                        </select>
                                        <select id="profitCategoryFilter" class="form-select form-select-sm w-auto">
                                            <option value="all">Todas las categorías</option>
                                            <option value="blockbuster">Blockbusters</option>
                                            <option value="indie">Cine Independiente</option>
                                            <option value="international">Cine Internacional</option>
                                        </select>
                                    </div>
                                    <div class="chart-container">
                                        <canvas id="chartAnualProfitability"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xl-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-dollar-sign me-1"></i>
                                    Películas Más Rentables por Ganancia Neta
                                </div>
                                <div class="card-body">
                                    <div class="mb-2">
                                        <select id="profitTimeRangeFilter" class="form-select form-select-sm w-auto">
                                            <option value="all-time">Todo el tiempo</option>
                                            <option value="last-5-years">Últimos 5 años</option>
                                            <option value="last-10-years">Últimos 10 años</option>
                                            <option value="last-20-years">Últimos 20 años</option>
                                        </select>
                                    </div>
                                    <div class="chart-container">
                                        <canvas id="profitChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-percentage me-1"></i>
                                    Mayor ROI (Retorno sobre Inversión)
                                </div>
                                <div class="card-body">
                                    <div class="form-group mb-3">
                                        <label for="budgetSelect">Presupuesto mínimo de producción:</label>
                                        <select id="budgetSelect" class="form-select">
                                            <option value="1">Cualquiera</option>
                                            <option value="10000">10 mil+ USD</option>
                                            <option value="100000">100 mil+ USD</option>
                                            <option value="1000000">1 millón+ USD</option>
                                            <option value="10000000">10 millones+ USD</option>
                                        </select>
                                    </div>
                                    <div id="roiTable"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xl-12">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-globe me-1"></i>
                                    Distribución Global de Producción Cinematográfica
                                </div>
                                <div class="card-body">
                                    <div class="mb-2 d-flex gap-2">
                                        <select id="mapMetricFilter" class="form-select form-select-sm w-auto">
                                            <option value="productions">Número de Producciones</option>
                                            <option value="revenue">Ingresos Totales</option>
                                            <option value="budget">Inversión Total</option>
                                        </select>
                                        <select id="mapYearFilter" class="form-select form-select-sm w-auto">
                                            <option value="all">Todo el período</option>
                                            <option value="2020-2023">2020-2023</option>
                                            <option value="2010-2019">2010-2019</option>
                                            <option value="2000-2009">2000-2009</option>
                                            <option value="1990-1999">1990-1999</option>
                                        </select>
                                    </div>
                                    <div id="heatmap" style="width: 100%; height: 450px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <footer class="py-4 bg-light mt-auto">
                <div class="container-fluid px-4">
                    <div class="d-flex align-items-center justify-content-between small">
                        <div class="text-muted">Copyright &copy; Cinematics Analytics 2025</div>
                        <div>
                            <a href="#">Privacy Policy</a>
                            &middot;
                            <a href="#">Terms &amp; Conditions</a>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
    <script src="./js/app.js"></script>
    <script src="./js/roi.js"></script>
    <script src="./js/barchart.js"></script>
    
    <script>
        // Código para manejar los filtros globales y actualizar las gráficas
        document.addEventListener('DOMContentLoaded', function() {
            // Resetear filtros
            document.getElementById('resetFilters').addEventListener('click', function() {
                // Restablecer todos los selectores de filtro a sus valores predeterminados
                document.querySelectorAll('select').forEach(select => {
                    select.selectedIndex = 0;
                });
                
                // Disparar un evento para actualizar todas las gráficas
                document.dispatchEvent(new CustomEvent('filtersReset'));
            });
            
            // Preparar la actualización de gráficas cuando cambian los filtros
            document.querySelectorAll('select').forEach(select => {
                select.addEventListener('change', function() {
                    // Disparar un evento personalizado con el filtro que cambió
                    document.dispatchEvent(new CustomEvent('filterChanged', {
                        detail: {
                            filterId: this.id,
                            value: this.value
                        }
                    }));
                });
            });
            
            // Inicializar gráficos con tamaños optimizados
            function initCharts() {
                // Este código conectaría con tus implementaciones de gráficas
                console.log('Inicializando gráficas con dimensiones optimizadas');
            }
            
            // Inicializar
            initCharts();
        });
    </script>
</body>
</html>